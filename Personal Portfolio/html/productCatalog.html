<!DOCTYPE html>
<html>
  <head>
    <script src="../js/productCatalog.js"></script>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <link rel="stylesheet" href="../css/productCatalog.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link href="assets/img/favicon.png" rel="icon" />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
      rel="stylesheet"
    />
  </head>
  <title>Abhisek Rai: Products</title>
  <body>
    <nav class="navigation">
      <a href="../html/personalPortfolio.html">ABHISEK RAI</a>
      <ul class="list">
        <li class="sublist">
          <a href="../html/personalPortfolio.html">Home</a>
        </li>
        <li class="sublist"><a href="../html/aboutMe.html">About</a></li>
        <li class="sublist"></li>
        <a href="../html/resume.html">Resume</a>
        <li class="active">
          <a href="../html/productCatalog.html">Products</a>
        </li>
      </ul>
    </nav>
    <main class="contentbody">
      <h2 class="subhead">Product Catalog</h2>
      <button type="button" id="click" onclick="getProducts()">Data</button>
      <p id="p2"></p>
      <table id="productData">
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Catergory</th>
          <th>
            Price
            <select name="Currency" id="monies" onchange="getProductsEuro()">
              <option value="SGD">SGD</option>
              <option value="Euro">Euro</option>
              <option value="USD">USD</option>
            </select>
          </th>
        </tr>
      </table>
      <script>
        function getProducts() {
          var ajaxRequest = new XMLHttpRequest();
          ajaxRequest.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
              let myObj = JSON.parse(this.responseText);
              //document.getElementById("p2").innerHTML = myObj;
              append_json(myObj);

              //callback(myObj);
            }
          };

          ajaxRequest.open(
            "GET",
            "http://127.0.0.1:5500/Personal%20Portfolio/html/productCatalog.json",
            true
          );
          ajaxRequest.send();
          /*fetch(
            "http://127.0.0.1:5500/Personal%20Portfolio/html/productCatalog.json"
          )
            .then((response) => response.json())
            .then((data) => console.log(data));*/
          function append_json(data) {
            let table = document.getElementById("productData");
            data.forEach(function (object) {
              let tr = document.createElement("tr");
              tr.innerHTML =
                "<td>" +
                object.ID +
                "</td>" +
                "<td>" +
                object.Name +
                "</td>" +
                "<td>" +
                object.Catergory +
                "</td>" +
                "<td>" +
                object.Price +
                "</td>";
              table.appendChild(tr);
            });
          }
        }
      </script>
      <script>
        function getProductsEuro(callback) {
          var ajaxRequestEuro = new XMLHttpRequest();
          ajaxRequestEuro.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
              let myObjEuro = JSON.parse(this.responseText);
              //document.getElementById("p2").innerHTML = myObj;
              append_json(myObjEuro);

              //callback(myObj);
            }
          };

          ajaxRequestEuro.open(
            "GET",
            "http://127.0.0.1:5500/Personal%20Portfolio/html/euroProductCat.json",
            true
          );
          ajaxRequestEuro.send();
          /*fetch(
            "http://127.0.0.1:5500/Personal%20Portfolio/html/productCatalog.json"
          )
            .then((response) => response.json())
            .then((data) => console.log(data));*/
          function append_json(data) {
            let table = document.getElementById("productData");
            data.forEach(function (object) {
              let tr = document.createElement("tr");
              tr.innerHTML =
                "<td>" +
                object.ID +
                "</td>" +
                "<td>" +
                object.Name +
                "</td>" +
                "<td>" +
                object.Catergory +
                "</td>" +
                "<td>" +
                object.Price +
                "</td>";
              table.appendChild(tr);
            });
          }
        }
      </script>
    </main>
  </body>
</html>
